---
layout: post
title: k8s系统笔记
date: 2021-08-09 09:55 +0800
excerpt: '记录某世界500强软件企业的k8s微服务实践'
---

# 关于
记录某世界500强软件企业的k8s实践。 先罗列一下基本术语，后面按照术语逐步展开。

1. K8S, 我们常说的云服务框架
2. Docker, K8S是用来管理容器的, 常见的容器类型就是Docker container.
3. Argocd, 用来处理Helm Charts.  ArgoCD是一个专为Kubernetes而生，遵循GitOps理念的持续部署工具。这里指的Gitops简单来说就是
   1. 以Git为核心。
   2. 声明式定义各类对象。
   3. 配置一致性管理。
   4. 它集中于CD, 持续交付。
   5. CI有Jenkins来做。
4. Jenkins, Jenkins是一款开源CI(Continuous Integration，持续集成)&CD(Continuous Delivery，持续交付)软件，用于自动化各种任务，包括构建、测试和部署软件，源码在https://github.com/jenkinsci/jenkins ，License为MIT.
1. Vault, 一个存储secrets的工具，有商业版也有付费版。 HashiCorp出品.
2. Consul, HashiCorp公司推出的开源工具，用于实现分布式系统的服务发现与配置。与其他分布式服务注册与发现的方案，Consul的方案更"一站式"，内置了服务注册与发现框 架、分布一致性协议实现、健康检查、Key/Value存储、多数据中心方案，不再需要依赖其他工具（比如ZooKeeper等）。使用起来也较 为简单。Consul用Golang实现，因此具有天然可移植性(支持Linux、windows和Mac OS X)；安装包仅包含一个可执行文件，方便部署，与Docker等轻量级容器可无缝配合。
3. Rancher, Rancher是一个开源的企业级容器管理平台。通过Rancher，企业再也不必自己使用一系列的开源软件去从头搭建容器服务平台。Rancher提供了在生产环境中使用的管理Docker和Kubernetes的全栈化容器部署与管理平台。 由一下4部分组成:
   1.  基础设施编排, host资源管理。
   2.  容器编排与调度
   3.  应用商店。 Rancher的用户可以在应用商店里一键部署由多个容器组成的应用。用户可以管理这个部署的应用，并且可以在这个应用有新的可用版本时进行自动化的升级。Rancher提供了一个由Rancher社区维护的应用商店，其中包括了一系列的流行应用。Rancher的用户也可以创建自己的私有应用商店。
   4.  企业级权限管理。 支持Active Directory，LDAP， Github等 认证方式
4. ingress, Ingress 是对集群中服务的外部访问进行管理的 API 对象，典型的访问方式是 HTTP. Ingress 可以提供负载均衡、SSL 终结和基于名称的虚拟托管。
5. nip. 一个本地ip转化为公网ip的工具.
6.


# 流程

Next:
微服务的构建，部署流程。

# 常用命令

1. kubectl get namespace
2. kubectl po -n mobile
3. kubectl get po -n mobile
4. kubectl exec -it mp-app-7cbb8cc9b9-bpktj -n mobile -- sh



# 链接
1. [基于Jenkins和Argocd实现CI/CD](https://cloud.tencent.com/developer/article/1755628)
2.
